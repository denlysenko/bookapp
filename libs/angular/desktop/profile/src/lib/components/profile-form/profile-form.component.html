<div class="form">
  <form [formGroup]="form" (submit)="submit()" novalidate>
    <mat-form-field>
      <mat-label>First Name</mat-label>
      <input matInput placeholder="First Name" formControlName="firstName" data-test="firstName" />

      @if (form.get('firstName')?.hasError('required')) {
        <mat-error>This field is required</mat-error>
      }

      @if (form.get('firstName')?.hasError('serverError')) {
        <mat-error>{{ errors['firstName'] }}</mat-error>
      }
    </mat-form-field>

    <mat-form-field>
      <mat-label>Last Name</mat-label>
      <input matInput placeholder="Last Name" formControlName="lastName" data-test="lastName" />

      @if (form.get('lastName')?.hasError('required')) {
        <mat-error>This field is required</mat-error>
      }

      @if (form.get('lastName')?.hasError('serverError')) {
        <mat-error>{{ errors['lastName'] }}</mat-error>
      }
    </mat-form-field>

    <mat-form-field>
      <mat-label>Email</mat-label>
      <input type="email" matInput placeholder="Email" formControlName="email" data-test="email" />

      @if (form.get('email')?.hasError('required')) {
        <mat-error>This field is required</mat-error>
      }

      @if (form.get('email')?.hasError('email')) {
        <mat-error>Not a valid email</mat-error>
      }

      @if (form.get('email')?.hasError('serverError')) {
        <mat-error>{{ errors['email'] }}</mat-error>
      }
    </mat-form-field>

    <mat-card-actions>
      <button
        type="submit"
        matButton="filled"
        class="accent"
        [disabled]="loading()"
        data-test="submit"
      >
        Save
      </button>
    </mat-card-actions>
  </form>
</div>
