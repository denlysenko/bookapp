<section>
  <mat-toolbar class="page-toolbar">Book Details</mat-toolbar>

  @if (book$ | async; as book) {
    <div class="view-content">
      <mat-card>
        <bookapp-book-details
          [book]="book"
          [bookmarks]="bookmarks$ | async"
          [user]="user$ | async"
          (bookRated)="rate($event)"
          (bookmarkAdded)="addToBookmarks($event)"
          (bookmarkRemoved)="removeFromBookmarks($event)"
          (paymentRequested)="pay($event)"
        />

        <bookapp-book-comments
          [comments]="book.comments"
          [loading]="loading()"
          (commentAdded)="submitComment(book.id, $event)"
        />
      </mat-card>
    </div>
  }
</section>
