<GridLayout class="bg-surface">
  <CardView margin="10" elevation="4" shadowOffsetHeight="1" class="bg-card">
    <FlexboxLayout flexDirection="column" height="100%">
      <GridLayout class="p-4 rounded-lg" flexGrow="1">
        <StackLayout class="form" [formGroup]="form">
          <PreviousNextView>
            <StackLayout>
              <StackLayout
                class="mb-5"
                [class.has-error]="submitting() && form.get('oldPassword').invalid"
              >
                <TextField
                  hint="Current Password"
                  class="input"
                  secure="true"
                  formControlName="oldPassword"
                ></TextField>

                @if (form.get('oldPassword').hasError('required')) {
                  <Label text="This field is required" class="error"></Label>
                }

                @if (form.get('oldPassword').hasError('serverError')) {
                  <Label [text]="errors['oldPassword']" class="error"></Label>
                }
              </StackLayout>

              <StackLayout
                class="mb-5"
                [class.has-error]="submitting() && form.get('password').invalid"
              >
                <TextField
                  hint="New Password"
                  class="input"
                  secure="true"
                  formControlName="password"
                ></TextField>

                @if (form.get('password').hasError('required')) {
                  <Label text="This field is required" class="error"></Label>
                }

                @if (form.get('password').hasError('serverError')) {
                  <Label [text]="errors['password']" class="error"></Label>
                }
              </StackLayout>
            </StackLayout>
          </PreviousNextView>

          <Button
            class="btn btn-primary btn-active w-full"
            text="Save"
            [isEnabled]="!loading()"
            (tap)="submit()"
          ></Button>
        </StackLayout>
      </GridLayout>
    </FlexboxLayout>
  </CardView>
</GridLayout>
